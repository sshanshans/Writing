---
layout: post
title: Host your learnr tutorial on your own shiny server
---

Congrats! Now you have configured the shiny server on your virtual machine. To host your learnr tutorial, you need to place the tutorial file (.Rmd) in the correct folder via the command `scp` that transfers your file securely to the virtual machine. 

## Step 1: log onto your virtual machine
To log onto your virtual machine, open a terminal and type the following

```
ssh [remote_username]@[host_address]
```
- `[remote_username]`:  Your username on the virtual machine
- `[host_address]`: The host address of your virtual machine

If this is your first login, you will be prompted to confirm that you want to continue establishing the connection (type `Y`) and enter your password (if you have a public key setup, you don't need a password.)

Once you have successfully logged in, you will see the base directory in your terminal is changed to `[remote_username]@[host_address]` 


## Step 2: make a folder
Now let's make a folder to host your learnr tutorial. Run the following in your terminal.

```
cd /srv/shiny-server/
mkdir [remote_folder]
cd [remote_folder]
sudo chmod -R 777 ./
```

- `[remote_folder]`: The directory you want to host your learnr tutorial. For example, if I want to create a `tutorial01` folder under my name, I would type:

```
cd /srv/shiny-server/
mkdir sshan/tutorial01
cd sshan/tutorial01
sudo chmod -R 777 ./
```

The `cd` command is short-handed for change directory. It allows you to go into the folder `/srv/shiny-server/`. All your shiny apps or learnr tutorials should be hosted here. We make a new folder by `mkdir` and `cd` into the new folder called [remote_folder].  The `sudo chmod` command allows you to authorize the entire folder so that later the shiny-server can make changes in the folder and build the tutorial (.html formate) in the same folder. 

In general, it is recommended to create a separate folder for each learnr tutorial/shiny app. 

## Step 3: copy your tutorial from your local machine to the remote server
If you have already made a learnr tutorial before, let's deploy it to the remote server. 

Let's first log out from the remote server by typing in the terminal

```
exit
```
Then we use the `scp` to transfer the `[local_file]` to the folder `/srv/shiny-server/[remote_folder]` on the remote server `[remote_username]@[host_address]`.

```
scp [local_file] [remote_username]@[host_address]:/srv/shiny-server/[remote_folder]
```
To use this code, change the following: 

- `[local_file]`: The path and name of the file we want to copy
- `[remote_username]`:  Your username on the virtual machine
- `[host_address]`: The host address of your virtual machine
- `[remote_folder]`: The directory you want to copy the file into

Depending on your setup, you may have to use add `sudo` at the beginning to allow changes on the root.

#### Example
```
sudo scp /Users/sshan/tutorial.Rmd sshan@rshiny.mtholyoke.edu:/srv/shiny-server/sshan/
```
## Your tutorial is now up in the air
Viola! You have just uploaded and deployed your first learnr tutorial on the shiny server. You can view it by going to that folder's URL listened on the IP address `138.110.84.108`  with port `3838`. 
```
http://http://138.110.84.108:3838/[remote_folder]/tutorial.Rmd
```
If you forgot what your IP address is,  you can find out by the `hostname -I` command. 

# FAQ

Q: I logged onto the webpage, but I got an error message saying "the application failed to start". 

A: You can get more information about the error by checking the shiny server log at `/var/log/shiny-server`. The folder contains a list of outputs for each instantiation of the shiny server. 

Q: The error log says "Unable to write prerendered HTML file to /srv/shiny-server/[remote_folder]/index.html". What should I do?

A: If you have this error, it means the shiny server has not had the permission to change in the `remote_folder`. To grant the permission, run the following code in your command line.
```
cd /srv/shiny-server/[remote_folder]
sudo chmod -R 777 ./
```
The `sudo chmod` command allows you to authorize the entire folder.

Q: The error log says "Error in library(tidyverse) : there is no package called 'tidyverse'".

A: The error means the R pacakge has not been installed on the remote server. To install, run the following code in your command line.

```
sudo su - -c "R -e \"install.packages('tidyverse', repos='http://cran.rstudio.com/')\""
```

# Other useful commands

- Connect to your virtual machine:    `ssh [username]@[host_address]`
- Change the current directory:   `cd [new_directory]` 
- Made a new folder :   `mkdir [new_directory]`
